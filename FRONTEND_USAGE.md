# å‰ç«¯ä½¿ç”¨æŒ‡å—

## ğŸ‰ é¡¹ç›®å·²å®Œæˆ

å‰ç«¯é¡¹ç›®å·²å®Œæ•´å¼€å‘å®Œæˆï¼Œä½äº `frontend/` ç›®å½•ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### 1. Kçº¿å›¾å±•ç¤ºï¼ˆç±»å¯Œé€”Appé£æ ¼ï¼‰
- âœ… è‚¡ç¥¨ä»£ç ã€åç§°ã€çŠ¶æ€æ˜¾ç¤º
- âœ… å®æ—¶ä»·æ ¼ã€æ¶¨è·Œå¹…ã€æ¢æ‰‹ç‡
- âœ… æœ€é«˜ã€æœ€ä½ã€ä»Šå¼€ã€æ˜¨æ”¶
- âœ… æˆäº¤é¢ã€æ€»å¸‚å€¼
- âœ… æ—¥Kçº¿ / å‘¨Kçº¿åˆ‡æ¢
- âœ… æŠ€æœ¯æŒ‡æ ‡ï¼š
  - æˆäº¤é‡æŸ±çŠ¶å›¾
  - MACDï¼ˆDIFã€DEAã€HISTï¼‰
  - KDJï¼ˆKã€Dã€Jï¼‰
  - ZX Shortï¼ˆçŸ­æœŸè¶‹åŠ¿çº¿ï¼‰
  - ZX Longï¼ˆå¤šç©ºçº¿ï¼‰

### 2. å“åº”å¼å¸ƒå±€
- âœ… **PCç«¯**ï¼š1x2 ç½‘æ ¼å¸ƒå±€ï¼ˆä¸¤åˆ—å±•ç¤ºï¼‰
- âœ… **ç§»åŠ¨ç«¯**ï¼š1x1 å•åˆ—å¸ƒå±€
- âœ… è‡ªé€‚åº”å±å¹•å°ºå¯¸
- âœ… è§¦æ‘¸æ‰‹åŠ¿æ”¯æŒ

### 3. æ€§èƒ½ä¼˜åŒ–
- âœ… æµå¼åŠ è½½ï¼ˆNDJSONï¼‰
- âœ… æ¸¸æ ‡åˆ†é¡µï¼ˆcursor-basedï¼‰
- âœ… æŒ‰éœ€æ¸²æŸ“
- âœ… å›¾è¡¨æ‡’åŠ è½½

### 4. ç”¨æˆ·ä½“éªŒ
- âœ… æ·±è‰²ä¸»é¢˜ï¼ˆä¸“ä¸šäº¤æ˜“é£æ ¼ï¼‰
- âœ… æµç•…åŠ¨ç”»è¿‡æ¸¡
- âœ… åŠ è½½çŠ¶æ€æç¤º
- âœ… ç©ºçŠ¶æ€å¤„ç†
- âœ… é”™è¯¯æç¤º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd frontend
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

### 3. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5173`

## ğŸ“ é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/              # API æœåŠ¡å±‚ï¼ˆAxios + æµå¼åŠ è½½ï¼‰
â”‚   â”œâ”€â”€ assets/           # é™æ€èµ„æºï¼ˆä¸»é¢˜æ ·å¼ï¼‰
â”‚   â”œâ”€â”€ components/       # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ KlineChart.vue  # Kçº¿å›¾æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ router/           # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ views/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ StockList.vue   # è‚¡ç¥¨åˆ—è¡¨é¡µ
â”‚   â”‚   â””â”€â”€ StockDetail.vue # è‚¡ç¥¨è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ App.vue           # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts           # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ style.css         # å…¨å±€æ ·å¼
â”œâ”€â”€ index.html            # HTML æ¨¡æ¿
â”œâ”€â”€ package.json          # ä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.ts        # Vite é…ç½®
â””â”€â”€ tsconfig.json         # TypeScript é…ç½®
```

## ğŸ¨ ç•Œé¢å±•ç¤º

### è‚¡ç¥¨åˆ—è¡¨é¡µï¼ˆPCç«¯ 1x2 å¸ƒå±€ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HoraceQuant         [b1] [2025-12-29]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ 002456 æ¬§è²å…‰   â”‚  â”‚ 600000 æµ¦å‘é“¶è¡Œ â”‚          â”‚
â”‚  â”‚ 10.65 -0.04     â”‚  â”‚ 8.52 +0.12      â”‚          â”‚
â”‚  â”‚ [Kçº¿å›¾]         â”‚  â”‚ [Kçº¿å›¾]         â”‚          â”‚
â”‚  â”‚ [æˆäº¤é‡]        â”‚  â”‚ [æˆäº¤é‡]        â”‚          â”‚
â”‚  â”‚ [MACD]          â”‚  â”‚ [MACD]          â”‚          â”‚
â”‚  â”‚ [KDJ]           â”‚  â”‚ [KDJ]           â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ 000001 å¹³å®‰é“¶è¡Œ â”‚  â”‚ 601318 ä¸­å›½å¹³å®‰ â”‚          â”‚
â”‚  â”‚ ...             â”‚  â”‚ ...             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚           [åŠ è½½æ›´å¤š]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç§»åŠ¨ç«¯ï¼ˆ1x1 å¸ƒå±€ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HoraceQuant     â”‚
â”‚ [b1] 2025-12-29 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 002456 æ¬§è²å…‰   â”‚
â”‚ 10.65 -0.04     â”‚
â”‚ [Kçº¿å›¾]         â”‚
â”‚ [æˆäº¤é‡]        â”‚
â”‚ [MACD]          â”‚
â”‚ [KDJ]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 600000 æµ¦å‘é“¶è¡Œ â”‚
â”‚ 8.52 +0.12      â”‚
â”‚ [Kçº¿å›¾]         â”‚
â”‚ ...             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [åŠ è½½æ›´å¤š]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ é…ç½®è¯´æ˜

### API ä»£ç†é…ç½®

å¼€å‘ç¯å¢ƒå·²é…ç½®ä»£ç†ï¼ˆ`vite.config.ts`ï¼‰ï¼š

```typescript
server: {
  proxy: {
    '/api': {
      target: 'http://127.0.0.1:8000',
      changeOrigin: true
    }
  }
}
```

### é»˜è®¤è·¯ç”±

é»˜è®¤é‡å®šå‘åˆ°ï¼š`/stocks/b1/20251229`

ä¿®æ”¹é»˜è®¤æ—¥æœŸï¼šç¼–è¾‘ `src/router/index.ts`

### ä¸»é¢˜é¢œè‰²

ä¸»é¢˜å˜é‡å®šä¹‰åœ¨ `src/assets/theme.css`ï¼š

```css
:root {
  --bg-primary: #0a0a0a;      /* ä¸»èƒŒæ™¯ */
  --color-up: #ee4b4b;        /* æ¶¨è‰²ï¼ˆçº¢ï¼‰ */
  --color-down: #3dd598;      /* è·Œè‰²ï¼ˆç»¿ï¼‰ */
  --indicator-yellow: #ffd700; /* æŒ‡æ ‡é¢œè‰² */
  /* ... */
}
```

## ğŸ“Š æ•°æ®æµç¨‹

```
1. ç”¨æˆ·è®¿é—® /stocks/b1/20251229
   â†“
2. StockList.vue ç»„ä»¶åŠ è½½
   â†“
3. è°ƒç”¨ fetchPicksStream() æµå¼æ¥å£
   â†“
4. æ¥æ”¶ NDJSON æ•°æ®æµ
   - ç¬¬ä¸€æ¡ï¼šmetaï¼ˆnext_cursor ç­‰ï¼‰
   - åç»­ï¼šitemï¼ˆæ¯åªè‚¡ç¥¨æ•°æ®ï¼‰
   â†“
5. é€ä¸ªæ¸²æŸ“ KlineChart ç»„ä»¶
   â†“
6. ECharts ç»˜åˆ¶å›¾è¡¨
   - Kçº¿ä¸»å›¾ + è¶‹åŠ¿çº¿
   - æˆäº¤é‡å‰¯å›¾
   - MACD å‰¯å›¾
   - KDJ å‰¯å›¾
   â†“
7. ç”¨æˆ·äº¤äº’
   - åˆ‡æ¢æ—¥K/å‘¨K
   - ç¼©æ”¾ã€æ‹–åŠ¨å›¾è¡¨
   - ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…
```

## ğŸ¯ æ ¸å¿ƒæŠ€æœ¯

### Vue 3 Composition API

```typescript
// ç¤ºä¾‹ï¼šå“åº”å¼æ•°æ®
const items = ref<PickBundleItem[]>([])
const loading = ref(false)

// è®¡ç®—å±æ€§
const currentData = computed(() => {
  return currentPeriod.value === 'daily' ? dailyData : weeklyData
})

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  loadData()
})
```

### ECharts é…ç½®

```typescript
const option: echarts.EChartsOption = {
  grid: [
    { /* Kçº¿ä¸»å›¾ */ },
    { /* æˆäº¤é‡ */ },
    { /* MACD */ },
    { /* KDJ */ }
  ],
  xAxis: [/* 4ä¸ªxè½´ */],
  yAxis: [/* 4ä¸ªyè½´ */],
  series: [
    { type: 'candlestick', /* Kçº¿ */ },
    { type: 'line', /* è¶‹åŠ¿çº¿ */ },
    { type: 'bar', /* æˆäº¤é‡ */ },
    { type: 'line', /* MACD */ },
    { type: 'line', /* KDJ */ }
  ]
}
```

### æµå¼åŠ è½½

```typescript
async function* fetchPicksStream(params) {
  const response = await fetch('/api/v1/picks/.../stream')
  const reader = response.body.getReader()
  
  while (true) {
    const { done, value } = await reader.read()
    if (done) break
    
    // è§£æ NDJSON
    const lines = decoder.decode(value).split('\n')
    for (const line of lines) {
      yield JSON.parse(line)
    }
  }
}
```

## ğŸ“± å“åº”å¼è®¾è®¡

### CSS åª’ä½“æŸ¥è¯¢

```css
/* PCç«¯ï¼š1x2 å¸ƒå±€ */
@media (min-width: 1024px) {
  .stocks-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ç§»åŠ¨ç«¯ï¼š1x1 å¸ƒå±€ */
@media (max-width: 1023px) {
  .stocks-grid {
    grid-template-columns: 1fr;
  }
}
```

## ğŸ› ï¸ å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev

# ç±»å‹æ£€æŸ¥
npm run type-check

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

## ğŸ“¦ æ„å»ºéƒ¨ç½²

### æ„å»º

```bash
npm run build
```

æ„å»ºäº§ç‰©åœ¨ `dist/` ç›®å½•ã€‚

### éƒ¨ç½²

è¯¦è§ [DEPLOY.md](frontend/DEPLOY.md)

## ğŸ› å¸¸è§é—®é¢˜

### Q1: é¡µé¢æ˜¾ç¤º"æš‚æ— é€‰è‚¡ç»“æœ"

**åŸå› ï¼š**
- åç«¯æœªè¿è¡Œ
- è¯¥æ—¥æœŸæœªæ‰§è¡Œé€‰è‚¡è„šæœ¬
- æ•°æ®åº“ä¸­æ— æ•°æ®

**è§£å†³ï¼š**
1. ç¡®è®¤åç«¯è¿è¡Œï¼š`http://127.0.0.1:8000/healthz`
2. æ‰‹åŠ¨æ‰§è¡Œé€‰è‚¡ï¼š
   ```bash
   python backend/ops/scripts/stock_picker_tdx.py \
     --rule backend/rules/b1.tdx \
     --rule-name b1 \
     --trade-date 2025-12-29
   ```

### Q2: Kçº¿å›¾ä¸æ˜¾ç¤º

**åŸå› ï¼š**
- æ•°æ®æ ¼å¼é”™è¯¯
- ECharts åˆå§‹åŒ–å¤±è´¥

**è§£å†³ï¼š**
1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯
2. æ£€æŸ¥ Network æ ‡ç­¾ï¼Œç¡®è®¤ API è¿”å›æ•°æ®
3. ç¡®è®¤ `dailyData` å’Œ `weeklyData` ä¸ä¸ºç©º

### Q3: API è¯·æ±‚ CORS é”™è¯¯

**åŸå› ï¼š**
- åç«¯æœªé…ç½® CORS
- ä»£ç†é…ç½®é”™è¯¯

**è§£å†³ï¼š**
1. åç«¯è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   ```bash
   export HQ_CORS_ENABLED=true
   export HQ_CORS_ALLOW_ORIGINS=http://localhost:5173
   ```
2. æ£€æŸ¥ `vite.config.ts` ä»£ç†é…ç½®

### Q4: ç§»åŠ¨ç«¯å¸ƒå±€é”™ä¹±

**åŸå› ï¼š**
- è§†å£é…ç½®é”™è¯¯
- CSS åª’ä½“æŸ¥è¯¢æœªç”Ÿæ•ˆ

**è§£å†³ï¼š**
1. ç¡®è®¤ `index.html` ä¸­æœ‰ï¼š
   ```html
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   ```
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
3. ä½¿ç”¨ Chrome DevTools ç§»åŠ¨è®¾å¤‡æ¨¡æ‹Ÿå™¨æµ‹è¯•

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [frontend/README.md](frontend/README.md) - å‰ç«¯å®Œæ•´æ–‡æ¡£
- [frontend/QUICKSTART.md](frontend/QUICKSTART.md) - å¿«é€Ÿå¯åŠ¨
- [frontend/DEPLOY.md](frontend/DEPLOY.md) - éƒ¨ç½²æŒ‡å—
- [frontend/PROJECT_STRUCTURE.md](frontend/PROJECT_STRUCTURE.md) - é¡¹ç›®ç»“æ„
- [README.md](README.md) - é¡¹ç›®æ€»è§ˆ

## ğŸ“ å­¦ä¹ èµ„æº

- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/)
- [ECharts å®˜æ–¹æ–‡æ¡£](https://echarts.apache.org/zh/index.html)
- [TypeScript æ‰‹å†Œ](https://www.typescriptlang.org/zh/docs/)
- [Vite å®˜æ–¹æ–‡æ¡£](https://cn.vitejs.dev/)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

ä¸ªäººé¡¹ç›®ï¼Œé»˜è®¤ä¸æä¾›å•†ä¸šä¿è¯ã€‚

---

**å¼€å‘å®Œæˆæ—¶é—´ï¼š** 2025-12-30
**æŠ€æœ¯æ ˆï¼š** Vue 3 + TypeScript + Vite + ECharts + Axios
**ç‰¹è‰²ï¼š** ç±»å¯Œé€”Appé£æ ¼ã€æµå¼åŠ è½½ã€å“åº”å¼å¸ƒå±€

